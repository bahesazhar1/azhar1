<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>مقياس التقبل التكنولوجي</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Arial, sans-serif; background-color: #f4f7f6; padding: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); border-top: 5px solid #17a2b8; }
        h2 { color: #17a2b8; text-align: center; }
        .instructions { background: #e2e3e5; padding: 15px; border-radius: 5px; margin-bottom: 20px; font-size: 15px; line-height: 1.6; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: center; }
        th { background-color: #17a2b8; color: white; }
        td.text-right { text-align: right; }
        button { display: block; width: 100%; padding: 15px; background: #17a2b8; color: white; border: none; font-size: 18px; border-radius: 5px; cursor: pointer; margin-top: 30px; }
        button:hover { background: #138496; }
    </style>
</head>
<body>

    <script>
        // توجيه أمني لصفحة الاستبيان
        let currentUser = localStorage.getItem("currentUser");
        if (!currentUser) window.location.href = "index.html";
        else if (localStorage.getItem(currentUser + "_preTestDone") !== "true") window.location.href = "pretest.html"; 
        else if (localStorage.getItem(currentUser + "_surveyDone") === "true") window.location.href = "home.html";
    </script>

    <div class="container">
        <h2>مقياس التقبل التكنولوجي</h2>
        <div class="instructions">
            <strong>عزيزي الطالب،،،</strong><br>
            يرجى قراءة كل عبارة بعناية واختيار البديل المناسب (دائمًا – أحيانًا – نادرًا). علمًا بأن هذا المقياس ليس اختبارًا، وليس هناك استجابة صواب وأخرى خطأ، وهو لخدمة البحث العلمي فحسب.
        </div>

        <form id="surveyForm">
            <table>
                <thead>
                    <tr>
                        <th width="5%">م</th>
                        <th width="65%">عبارات المقياس</th>
                        <th width="10%">دائمًا</th>
                        <th width="10%">أحيانًا</th>
                        <th width="10%">نادرًا</th>
                    </tr>
                </thead>
                <tbody id="surveyTableBody">
                    </tbody>
            </table>
            <button type="button" onclick="submitSurvey()">إرسال الاستجابات والانتقال للمنصة</button>
        </form>
    </div>

    <script>
        const surveyStatements = [
            "أستطيع التعامل مع واجهة Google Classroom دون الحاجة إلى مهارات متقدمة.",
            "أستطيع إعداد استبانات واختبارات إلكترونية عبر Google Form بخطوات بسيطة.",
            "أتحكم في تنظيم الملفات داخل Google Drive بطريقة واضحة وسهلة.",
            "أستخدم Google Meet لعقد الاجتماعات الافتراضية بسهولة.",
            "أستفدت من منصة Google Classroom في تنظيم المقررات وإدارة الواجبات بسهولة."
        ];

        const tbody = document.getElementById('surveyTableBody');
        
        surveyStatements.forEach((statement, index) => {
            let row = `<tr>
                <td>${index + 1}</td>
                <td class="text-right">${statement}</td>
                <td><input type="radio" name="s${index}" value="دائما" required></td>
                <td><input type="radio" name="s${index}" value="أحيانا"></td>
                <td><input type="radio" name="s${index}" value="نادرا"></td>
            </tr>`;
            tbody.innerHTML += row;
        });

        function submitSurvey() {
            let allAnswered = true;
            let surveyData = {};
            
            for(let i = 0; i < surveyStatements.length; i++) {
                let selected = document.querySelector(`input[name="s${i}"]:checked`);
                if(!selected) {
                    allAnswered = false;
                    break;
                }
                surveyData[`s${i}`] = selected.value;
            }

            if(!allAnswered) {
                alert("يرجى الإجابة على جميع العبارات قبل الإرسال.");
                return;
            }

            // حفظ الإجابات وتوجيه الطالب للمنصة الرئيسية
            localStorage.setItem(currentUser + "_surveyAnswers", JSON.stringify(surveyData));
            localStorage.setItem(currentUser + "_surveyDone", "true");
            
            alert("شكراً لك! مساهمتك مقدرة للبحث العلمي.\nجاري توجيهك الآن للصفحة الرئيسية للمنصة...");
            window.location.href = "home.html";
        }
    </script>
</body>
</html>
